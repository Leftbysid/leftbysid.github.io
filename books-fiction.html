<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fiction</title>
  <link rel="stylesheet" href="books-fiction.css">

  <!-- Preload animated GIF for instant hover -->
  <link rel="preload" as="image" href="assets/cat.gif">
</head>

<body class="books-page">

<!-- DASHBOARD GIF BUTTON -->
<a href="fnf.html" class="home-gif" aria-label="Go to dashboard">
  <img src="assets/cat.png" data-anim="assets/cat.gif" alt="">
</a>

<!-- EXPORT + SHARE CONTROLS -->
<div class="export-controls">
  <button id="exportPdfBtn">Export PDF</button>
  <button id="exportJsonBtn">Export JSON</button>
  <button id="sharePageBtn">Share</button>
</div>

<h1 class="title">üìö FICTION ARCHIVE</h1>

<!-- STATS HEADER -->
<div class="stats">
  <span>Total: <b id="totalCount">0</b></span>
  <span>Read: <b id="readCount">0</b></span>
  <span>Unread: <b id="unreadCount">0</b></span>
</div>

<div class="controls">
  <input id="search" placeholder="Search books...">
  <button id="recentBtn">‚è± Recently Added</button>

  <select id="filterSelect">
    <option value="all">All</option>
    <option value="owned">Owned</option>
    <option value="not-owned">Not Owned</option>
    <option value="read">Read</option>
    <option value="not-read">Not Read</option>
  </select>
</div>

<button id="toggleForm">‚ûï Add Book</button>

<div id="bookForm" class="book-form hidden">
  <input id="title" placeholder="Title">

  <div style="position: relative;">
    <input id="author" placeholder="Author">
  </div>

  <div style="position: relative;">
    <input id="category" placeholder="Category">
  </div>

  <input id="date" type="date">
  <button onclick="addBook()">Save</button>
</div>

<div id="bookList"></div>

<!-- DELETE CONFIRM -->
<div id="confirmBox" class="confirm hidden">
  <div class="confirm-box">
    <p>Delete this book?</p>
    <div class="confirm-actions">
      <button onclick="confirmDelete()">Yes</button>
      <button onclick="closeConfirm()">Cancel</button>
    </div>
  </div>
</div>

<!-- EDIT POPUP -->
<div id="editOverlay" class="edit-overlay hidden">
  <div class="edit-box">
    <h3>Edit Book</h3>
    <input id="editTitle">
    <input id="editAuthor">
    <input id="editCategory">
    <input id="editDate" type="date">
    <div class="edit-actions">
      <button onclick="saveEdit()">üíæ Save</button>
      <button class="cancel" onclick="closeEdit()">‚úñ Cancel</button>
    </div>
  </div>
</div>

<!-- üîó SHARE PAGE MODAL (REQUIRED) -->
<div id="shareOverlay" class="overlay hidden">
  <div class="share-box">
    <h3>üîó Share Fiction Library</h3>

    <div class="share-actions">
      <button data-mode="permanent">Permanent</button>
      <button data-mode="24h">24 Hours</button>
      <button data-mode="revoke" class="danger">Revoke</button>
    </div>

    <div id="shareResult" class="share-result hidden">
      <input id="shareLink" readonly>
      <button id="copyShareLink">Copy</button>
    </div>

    <button class="close-btn" id="closeShare">‚úñ Close</button>
  </div>
</div>

<!-- PDF LIB -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script type="module" src="books-fiction.js"></script>

<!-- üî• GIF HOVER -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.home-gif img').forEach(img => {
      const staticSrc = img.src;
      const animatedSrc = img.dataset.anim;

      img.addEventListener('mouseenter', () => {
        img.src = animatedSrc + '?t=' + Date.now();
      });

      img.addEventListener('mouseleave', () => {
        img.src = staticSrc;
      });
    });
  });
</script>

</body>
</html>
