<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movies Archive</title>
  <link rel="stylesheet" href="movies.css">

  <!-- Preload animated GIF for instant hover -->
  <link rel="preload" as="image" href="assets/cat.gif">
</head>

<body class="movies">

<!-- DASHBOARD GIF BUTTON -->
<a href="stuffs.html" class="home-gif" aria-label="Go to dashboard">
  <img src="assets/cat.png" data-anim="assets/cat.gif" alt="">
</a>

  <h1 class="title">ðŸŽ¬ MOVIES ARCHIVE</h1>

  <div class="filters">
    <button data-filter="all" class="filter active">All</button>
    <button data-filter="seen" class="filter">Seen</button>
    <button data-filter="unseen" class="filter">Unseen</button>
  </div>

  <div class="controls">
    <input id="search" placeholder="Search movies, genres...">
    <button id="sortRecent" class="active">Recently Added</button>
  </div>

  <button id="toggleForm">âž• Add Movie</button>

  <div id="seriesForm" class="hidden">
    <input id="name" placeholder="Movie name">

    <!-- YEAR INPUT -->
    <input
      id="year"
      type="number"
      placeholder="Year"
      min="1900"
      max="2099"
    >

    <!-- GENRE INPUT -->
    <input
      id="genreInput"
      list="genreList"
      placeholder="Genres (comma separated)"
    >
    <datalist id="genreList"></datalist>

    <button id="saveSeries">Save</button>
  </div>

  <div id="seriesList"></div>

  <!-- DELETE -->
  <div id="confirmBox" class="confirm hidden">
    <div class="confirm-box">
      <p>Delete this movie?</p>
      <div class="confirm-actions">
        <button id="confirmDeleteBtn">Yes</button>
        <button id="cancelDeleteBtn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- EDIT -->
  <div id="editOverlay" class="edit-overlay hidden">
    <div class="edit-box">
      <h3>Edit Movie</h3>

      <input id="editName">

      <input
        id="editYear"
        type="number"
        min="1900"
        max="2099"
      >

      <input id="editGenres">

      <div class="edit-actions">
        <button id="saveEditBtn">ðŸ’¾ Save</button>
        <button class="cancel" id="cancelEditBtn">âœ– Cancel</button>
      </div>
    </div>
  </div>

  <script type="module" src="movies.js"></script>

  <!-- ðŸ”¥ REQUIRED: HOVER-ONLY GIF LOGIC -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.home-gif img').forEach(img => {
        const staticSrc = img.src;
        const animatedSrc = img.dataset.anim;

        img.addEventListener('mouseenter', () => {
          img.src = animatedSrc + '?t=' + Date.now();
        });

        img.addEventListener('mouseleave', () => {
          img.src = staticSrc;
        });
      });
    });
  </script>

</body>
</html>
